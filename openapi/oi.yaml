openapi: 3.0.3
info:
  title: OI - OpenAPI 3.0
  description: >-
    OI description


    Some useful links:

    - [One Identity
    repository](https://github.com/pagopa/oneidentity)

    - [The source API definition for OI](https://github.com/pagopa/oneidentity/blob/master/src/main/resources/openapi.yaml)
  termsOfService: http://pagopa.it/terms/
  contact:
    email: xxx@pagopa.it
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
  version: 0.0.1
externalDocs:
  description: Find out more about OI
  url: https://pagopa.it
servers:
  - url: https://dev.oneidentity.pagopa.it/api/v1
paths:
  /ping:
    get:
      tags:
        - Authorization Server APIs
      description: "[SHOULD BE RENAMED TO /status] An endpoint that can be used to verify the actual service health"
      operationId: Get_request_health_check
      responses:
        "200":
          description: Responds with no content
        "500":
          description: 'Responds with "error". This can be due to missing or incorrect API key. Check audit log messages for more information.'
        "503":
          description: 'Responds with "error". Returned on health check failure. This can be returned due to bad database configuration, bad certification configuration, etc. Check the audit log messages for more information.'
  /login:
    get:
      tags:
        - Login landing page
      description: This route will serve the login landing page, where users can choose which IDP use
      parameters:
        - name: client_id
          in: query
          required: true
          description: "This is the 'client_id' of the requesting client. Maximum 255 characters."
          schema:
            type: string
        - name: response_type
          in: query
          required: true
          description: "MUST be one of the listed available values. Any response_type other than 'code' or 'token' is only supported in conjunction with scope=openid. As per the OAuth specification: 'code' is used for authorization code grant type flow, 'token' is used for implicit grant type flow, 'token id_token' is an extension provided by OpenID Connect, and 'code id_token', 'id_token', and 'none' are extensions provided by OpenID Connect Multiple Response Types"
          schema:
            type: string
            default: code
            enum:
              - code
              - token
              - token id_token
              - code id_token
              - id_token
              - code token
              - code id_token token
              - none
        - name: redirect_uri
          in: query
          required: false
          description: "The 'redirect_uri' that was registered for this client. It is required if multiple redirect_uri's have been registered for this client. If the scope contains openid, this field becomes MANDATORY."
          schema:
            type: string
        - name: scope
          in: query
          required: false
          description: "Only SCOPE values that were registered for this client will be granted. If only non-matching SCOPE values are requested, the request will fail."
          schema:
            type: string
        - name: nonce
          in: query
          required: false
          description: "This is required for response_type 'token id_token'.  Typically, in an OpenID authorization scheme, the nonce represents a cryptographically strong random  string that is used to prevent intercepted responses from being reused."
          schema:
            type: string
        - name: state
          in: query
          required: false
          description: "Value opaque to the server, used by the client to track its session. It will be returned as received."
          schema:
            type: string
      responses:
        "200":
          description: OK
          headers:
            location:
              description: "Location (URL) includes these required parameters: action=(display or login depending on 'prompt' and 'id_token_hint') and sessionID and sessionData (a JWT containing a JSON message holding session data)"
              schema:
                type: string
        "400":
          description: "Invalid parameters | Invalid redirect_uri | invalid client type | invalid response type | invalid code_challenge/method"
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "401":
          description: The client could not be authenticated.
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "403":
          description: Forbidden.
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "405":
          description: The HTTP method is not valid
          headers:
            Allow:
              description: This header is required by RFC 2616 and contains a comma separated list of valid HTTP methods.
              schema:
                type: string
                default: "GET,POST"
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "500":
          description: unknown error
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
  /oidc/authorize:
    post:
      tags:
        - Authorization Server APIs
      description: "Initializes an OAuth 2.0 flow using a response_type. See RFC 6749 (https://tools.ietf.org/html/rfc6749) for more details."
      operationId: Get_request_authorization
      parameters:
        - name: client_id
          in: query
          required: true
          description: "This is the 'client_id' of the requesting client. Maximum 255 characters."
          schema:
            type: string
        - name: response_type
          in: query
          required: true
          description: "MUST be one of the listed available values. Any response_type other than 'code' or 'token' is only supported in conjunction with scope=openid. As per the OAuth specification: 'code' is used for authorization code grant type flow, 'token' is used for implicit grant type flow, 'token id_token' is an extension provided by OpenID Connect, and 'code id_token', 'id_token', and 'none' are extensions provided by OpenID Connect Multiple Response Types"
          schema:
            type: string
            enum:
              - code
              - token
              - token id_token
              - code id_token
              - id_token
              - code token
              - code id_token token
              - none
        - name: response_mode
          in: query
          required: false
          description: "Specify the method of returning the authorization response. As per the OpenID specification, use of this parameter is NOT RECOMMENDED if you are using the same response mode as the default response mode for the given response type. It MUST be one of the listed values in order to be accepted: 'query', 'fragment', 'form_post'."
          schema:
            type: string
            enum:
              - query
              - fragment
              - form_post
        - name: redirect_uri
          in: query
          required: false
          description: "The 'redirect_uri' that was registered for this client. It is required if multiple redirect_uri's have been registered for this client. If the scope contains openid, this field becomes MANDATORY."
          schema:
            type: string
        - name: scope
          in: query
          required: false
          description: "Only SCOPE values that were registered for this client will be granted. If only non-matching SCOPE values are requested, the request will fail."
          schema:
            type: string
        - name: nonce
          in: query
          required: false
          description: "This is required for response_type 'token id_token'.  Typically, in an OpenID authorization scheme, the nonce represents a cryptographically strong random  string that is used to prevent intercepted responses from being reused."
          schema:
            type: string
        - name: display
          in: query
          required: false
          description: "This is optional and used within the context of OpenID Connect (ie, response_type 'token id_token'). This parameter is not used here but forwarded to the /authorize/login API. Currently only 'page' are supported by default. The value 'social_login' will create a JSON message response instead of an HTML page containing a list of social login providers. The value 'local' will prevent the authorization server from displaying the social login buttons. This is the case if a user selected the local enterprise button for logging in."
          schema:
            type: string
            enum:
              - ""
              - page
              - social_login
              - local
            default: ""
        - name: prompt
          in: query
          required: false
          description: "This is used within the context of OpenID Connect. Indicates whether the server should prompt for login/consent. It is a space separated list of different values. The server supports the values 'none', 'login' and 'consent'. 'none' is only respected if 'id_token_hint' is not empty. 'consent' is only respected if the current user has an active OAuth session using the same client and the same SCOPE."
          schema:
            type: string
            default: login consent
        - name: id_token_hint
          in: query
          required: false
          description: "This is used within the context of OpenID Connect. Contains a previously issued id_token. This parameter is only respected for 'prompt=none' or 'prompt=none consent'."
          schema:
            type: string
        - name: acr_values
          in: query
          required: false
          description: This is used within the context of OpenID Connect. Indicates which acr (additional cryptography) classes are acceptable for the user authentication. It is a space separated list of different values.
          schema:
            type: string
        - name: code_challenge
          in: query
          required: false
          description: The code_challenge value in the context of PKCE (RFC 7636).
          schema:
            type: string
        - name: code_challenge_method
          in: query
          required: false
          description: The method that was used to create the code_challenge (plain or S256).
          schema:
            type: string
        - name: state
          in: query
          required: false
          description: "Value opaque to the server, used by the client to track its session. It will be returned as received."
          schema:
            type: string
        - name: login_hint
          in: query
          required: false
          description: A suggested username. This parameter is described in the OpenID Connect core specification.
          schema:
            type: string
      responses:
        "200":
          description: OK
          headers:
            location:
              description: "Location (URL) includes these required parameters: action=(display or login depending on 'prompt' and 'id_token_hint') and sessionID and sessionData (a JWT containing a JSON message holding session data)"
              schema:
                type: string
        "302":
          $ref: "#/components/responses/auth302"
        "400":
          description: "Invalid parameters | Invalid redirect_uri | invalid client type | invalid response type | invalid code_challenge/method"
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "401":
          description: The client could not be authenticated.
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "403":
          description: Forbidden.
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "405":
          description: The HTTP method is not valid
          headers:
            Allow:
              description: This header is required by RFC 2616 and contains a comma separated list of valid HTTP methods.
              schema:
                type: string
                default: "GET,POST"
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "500":
          description: unknown error
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
  /oidc/token:
    post:
      tags:
        - Token Server APIs
      description: "Request access_token or refresh_token using OAuth 2.0 grant_type: password authorization_code refresh_token client_credentials urn:ietf:params:oauth:grant-type:jwt-bearer urn:ietf:params:oauth:grant-type:saml2-bearer. See RFC 6749 for more details."
      operationId: Create_request_token
      parameters:
        - name: authorization
          in: header
          required: false
          description: "The HTTP basic authorization header containing the client credentials as base64 encoded string (authorization: Basic base64(client_id:client_secret)). This can only be used INSTEAD of the parameters 'client_id', 'client_secret'."
          schema:
            type: string
        - name: client_id
          in: query
          required: false
          description: The client_id. This can only be used INSTEAD of using the authorization header. Maximum 255 characters.
          schema:
            type: string
        - name: client_secret
          in: query
          required: false
          description: The client_secret. This can only be used INSTEAD of using the authorization header.
          schema:
            type: string
        - name: grant_type
          in: query
          required: true
          description: "For grant_type=password either authorization or client_id AND client_secret, username and password must be provided. For grant_type=client_credentials, either authorization or client_id AND client_secret must be provided. For grant_type=authorization_code: client_id, client_secret, code, and redirect_uri are required. For grant_type=refresh_token: client_id and refresh_token are required. For grant_type=jwt or saml2-bearer: client_id and assertion are required"
          schema:
            type: string
            enum:
              - password
              - refresh_token
              - authorization_code
              - client_credentials
              - "urn:ietf:params:oauth:grant-type:jwt-bearer"
              - "urn:ietf:params:oauth:grant-type:saml2-bearer"
            default: authorization_code
        - name: code
          in: query
          required: false
          description: Required if grant_type is authorization_code
          schema:
            type: string
        - name: redirect_uri
          in: query
          required: false
          description: Required if grant_type is authorization_code.  Must contain a valid auth code
          schema:
            type: string
        - name: scope
          in: query
          required: false
          description: "Only SCOPE values that were registered for this client will be granted. If only non-matching SCOPE values are requested, the request will fail."
          schema:
            type: string
        - name: username
          in: query
          required: false
          description: "If grant_type is password or client_credentials, this parameter must contain a valid username "
          schema:
            type: string
        - name: password
          in: query
          required: false
          description: "If grant_type is password or client_credentials, this parameter must contain a valid password"
          schema:
            type: string
            format: password
        - name: assertion
          in: query
          required: false
          description: "If grant_type is saml2-bearer or jwt, this parameter must contain a base64 encoded SAML or JWT token that represents an authenticated resource owner."
          schema:
            type: string
        - name: refresh_token
          in: query
          required: false
          description: "If grant_type is refresh_token, this parameter must contain a valid refresh_token."
          schema:
            type: string
        - name: code_verifier
          in: query
          required: false
          description: "A random value of 43-256 characters. See https://tools.ietf.org/html/rfc7636#section-4 for details.  This parameter is required only when a code_challenge is provided with the authorization request for this session."
          schema:
            type: string
      responses:
        "200":
          $ref: "#/components/responses/authToken200"
        "204":
          description: "No Content, applicable to OPTIONS request with preflight configuration"
          headers:
            Access-Control-Allow-Methods:
              description: "Allowable Methods, POST"
              schema:
                type: string
                default: POST
        "400":
          description: "Bad Request, see x-ca-err for possible error codes"
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "401":
          description: The client could not be authenticated.
          headers:
            WWW-Authenticate:
              description: This header is required by RFC 7235 if an authentication scheme has been used. It contains the used authentication scheme and an error message.
              schema:
                type: string
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "403":
          description: Forbidden.
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "405":
          description: The HTTP method is not valid
          headers:
            Allow:
              description: This header is required by RFC 2616 and contains a comma separated list of valid HTTP methods.
              schema:
                type: string
                default: POST
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "500":
          description: Unknown error.
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
  /oidc/register:
    options:
      tags:
        - Authorization Server APIs
      operationId: Options_oidc_register
      description: CORS preflight request
      parameters:
        - name: Access-Control-Request-Headers
          in: header
          required: true
          description: The Access-Control-Request-Headers request header is used when issuing a preflight request to let the server know which HTTP headers will be used when the actual request is made.
          schema:
            type: string
        - name: Access-Control-Request-Method
          in: header
          required: true
          description: The Access-Control-Request-Method request header is used when issuing a preflight request to let the server know which HTTP method will be used when the actual request is made.
          schema:
            type: string
        - name: Origin
          in: header
          required: true
          description: The Origin request header indicates where a fetch originates from.
          schema:
            type: string
      responses:
        "204":
          description: "No Content, applicable to OPTIONS request with preflight configuration"
          headers:
            Access-Control-Allow-Methods:
              description: "Allowable Methods, POST"
              schema:
                type: string
                default: POST
        "400":
          description: Bad request
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
      summary: OpenID Connect Dynamic Registration Configuration endpoint
    post:
      tags:
        - Authorization Server APIs
      description: "This endpoint follows the specification defined at http://openid.net/specs/openid-connect-registration-1_0.html. It enables a client to dynamically register itself as an OAuth 2.0 client."
      operationId: Post_oidc_register
      responses:
        "201":
          description: Successful registration including details about the registered values.
          content:
            application/json:
              schema:
                type: object
                properties:
                  client_id:
                    type: string
                    example: 47231c87-74f3-4990-99ad-31e8a801e3b5
                    description: The registered client_id
                  client_secret_expires_at:
                    type: integer
                    example: 0
                    description: The timestamp in seconds indicating the time of expiration for this value. 0 indicates no expiration
                  client_secret:
                    type: string
                    example: e4cccd81-1d19-41e7-b4b0-488aa28af77b
                    description: The registered client_secret
                  registration_access_token:
                    type: string
                    example: db4b7554-e359-43ed-bbf6-1a50909ceeef
                    description: "An access_token to be used at {registration_client_uri} to retrieve the registered information"
                  registration_client_uri:
                    type: string
                    example: "https://server.example.org/connect/register?client_id=s6BhdRkqt3"
                    description: The URI to retrieved the registered values
                  client_id_issued_at:
                    type: integer
                    example: 1497455914
                    description: The timestamp in seconds indicating the time of registration
                  token_endpoint_auth_method:
                    type: string
                    example: client_secret_basic
                    description: "The requested client authentication method for the token endpoint. Supports: client_secret_post, client_secret_basic, client_secret_jwt, private_key_jwt, none"
                  application_type:
                    type: string
                    example: web
                    description: The kind of application
                  redirect_uris:
                    type: array
                    items:
                      type: string
                    example:
                      - "https://client.example.org/callback"
                      - "https://client.example.org/callback2"
                    description: The array of redirection URI values used by this client
                  client_name:
                    type: string
                    example: "https://example.org"
                    description: The name of the client to be presented to the end-user
                  subject_type:
                    type: string
                    example: pairwise
                    description: The subject type requested for responses to this client
                  contacts:
                    type: array
                    items:
                      type: string
                    example:
                      - user1@example.org
                      - user2@example.org
                    description: The array of e-mail addresses of people responsible for this client
                  response_types:
                    type: array
                    items:
                      type: string
                    example:
                      - code
                      - token_id_token
                    description: The array containing a list of the OAuth 2.0 response_type values that this client is declaring that it will restrict itself to using
                  grant_types:
                    type: array
                    items:
                      type: string
                    example:
                      - authorization_code
                      - implicit
                    description: The array containing a list of the OAuth 2.0 grant types that this client is declaring that it will restrict itself to using
                  id_token_signed_response_alg:
                    type: string
                    example: RS256
                    description: The algorithm requried for signing the ID token issued to this client
                  environment:
                    type: string
                    example: ALL
                    description: "The development environment of the client e.g., IOS"
                  organization:
                    type: string
                    example: "https://organization.com"
                    description: The organization of the requestor
                  master:
                    type: boolean
                    example: false
                    description: The value identifies the client as being used as a master-key
                  description:
                    type: string
                    example: Registered via OpenID Connect Dynamic Registration
                    description: A description for this client
                  scope:
                    type: string
                    example: openid email profile openid_client_registration
                    description: A custom scope
        "400":
          description: Missing or invalid parameters.
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "403":
          description: Forbidden.
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "405":
          description: The HTTP method is not valid
          headers:
            Allow:
              description: This header is required by RFC 2616 and contains a comma separated list of valid HTTP methods.
              schema:
                type: string
                default: POST
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "429":
          description: Too many requests
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "500":
          description: unknown error
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
      summary: OpenID Connect Dynamic Registration endpoint
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                redirect_uris:
                  type: array
                  items:
                    type: string
                  example:
                    - "https://client.example.org/callback"
                    - "https://client.example.org/callback2"
                response_types:
                  type: array
                  items:
                    type: string
                  example:
                    - code
                    - token_id_token
                grant_types:
                  type: array
                  items:
                    type: string
                  example:
                    - authorization_code
                    - implicit
                application_type:
                  type: string
                  example: web
                contacts:
                  type: array
                  items:
                    type: string
                  example:
                    - user1@example.org
                    - user2@example.org
                client_name:
                  type: string
                  example: "https://example.org"
                subject_type:
                  type: string
                  example: pairwise
                id_token_signed_response_alg:
                  type: string
                  example: RS256
                token_endpoint_auth_method:
                  type: string
                  example: client_secret_basic
                scope:
                  type: string
                  example: openid email profile openid_client_registration
                organization:
                  type: string
                  example: "https://organization.com"
                description:
                  type: string
                  example: Registered via OpenID Connect Dynamic Registration
                environment:
                  type: string
                  example: ALL
                master:
                  type: boolean
                  example: false
        description: Request body
        required: true
  "/oidc/register/{client_id}":
    options:
      tags:
        - Authorization Server APIs
      operationId: Options_oidc_register_config
      description: CORS preflight request
      parameters:
        - name: Access-Control-Request-Headers
          in: header
          required: true
          description: The Access-Control-Request-Headers request header is used when issuing a preflight request to let the server know which HTTP headers will be used when the actual request is made.
          schema:
            type: string
        - name: Access-Control-Request-Method
          in: header
          required: true
          description: The Access-Control-Request-Method request header is used when issuing a preflight request to let the server know which HTTP method will be used when the actual request is made.
          schema:
            type: string
        - name: Origin
          in: header
          required: true
          description: The Origin request header indicates where a fetch originates from.
          schema:
            type: string
        - in: path
          name: client_id
          description: client_id that was returned in the client registration response
          required: true
          schema:
            type: string
      responses:
        "204":
          description: "No Content, applicable to OPTIONS request with preflight configuration"
          headers:
            Access-Control-Allow-Methods:
              description: "Allowable Methods, GET"
              schema:
                type: string
                default: GET
        "400":
          description: Bad request
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
      summary: OpenID Connect Dynamic Registration Configuration endpoint
    get:
      tags:
        - Authorization Server APIs
      description: "This endpoint follows the specification defined at http://openid.net/specs/openid-connect-registration-1_0.html. It implements the 'registration_client_uri'."
      operationId: Get_oidc_register_config
      parameters:
        - in: header
          name: authorization
          description: "MUST be 'Bearer the-access_token'. The access_token was issued as part of the client registration and is SCOPE'd to 'openid_client_registration'"
          required: true
          schema:
            type: string
        - in: path
          name: client_id
          description: client_id that was returned in the client registration response
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Successful response including details about the client registration. Additional details may also be included
          content:
            application/json:
              schema:
                type: object
                properties:
                  client_id:
                    type: string
                    example: 47231c87-74f3-4990-99ad-31e8a801e3b5
                    description: The registered client_id
                  client_secret_expires_at:
                    type: integer
                    example: 0
                    description: The timestamp in seconds indicating the time of expiration for this value. 0 indicates no expiration
                  client_secret:
                    type: string
                    example: e4cccd81-1d19-41e7-b4b0-488aa28af77b
                    description: The registered client_secret
                  registration_client_uri:
                    type: string
                    example: "https://server.example.org/connect/register?client_id=s6BhdRkqt3"
                    description: The URI to retrieved the registered values
                  client_id_issued_at:
                    type: integer
                    example: 1497455914
                    description: The timestamp in seconds indicating the time of registration
                  token_endpoint_auth_method:
                    type: string
                    example: client_secret_basic
                    description: "The requested client authentication method for the token endpoint. Supports: client_secret_post, client_secret_basic, client_secret_jwt, private_key_jwt, none"
                  application_type:
                    type: string
                    example: web
                    description: The kind of application
                  redirect_uris:
                    type: array
                    items:
                      type: string
                    example:
                      - "https://client.example.org/callback"
                      - "https://client.example.org/callback2"
                    description: The array of redirection URI values used by this client
                  client_name:
                    type: string
                    example: "https://example.org"
                    description: The name of the client to be presented to the end-user
                  subject_type:
                    type: string
                    example: pairwise
                    description: The subject type requested for responses to this client
                  contacts:
                    type: array
                    items:
                      type: string
                    example:
                      - user1@example.org
                      - user2@example.org
                    description: The array of e-mail addresses of people responsible for this client
                  response_types:
                    type: array
                    items:
                      type: string
                    example:
                      - code
                      - token_id_token
                    description: The array containing a list of the OAuth 2.0 response_type values that this client is declaring that it will restrict itself to using
                  grant_types:
                    type: array
                    items:
                      type: string
                    example:
                      - authorization_code
                      - implicit
                    description: The array containing a list of the OAuth 2.0 grant types that this client is declaring that it will restrict itself to using
                  id_token_signed_response_alg:
                    type: string
                    example: RS256
                    description: The algorithm requried for signing the ID token issued to this client
                  environment:
                    type: string
                    example: ALL
                    description: "The development environment of the client e.g., IOS"
                  organization:
                    type: string
                    example: "https://organization.com"
                    description: The organization of the requestor
                  master:
                    type: boolean
                    example: false
                    description: The value identifies the client as being used as a master-key
                  description:
                    type: string
                    example: Registered via OpenID Connect Dynamic Registration
                    description: A description for this client
                  scope:
                    type: string
                    example: openid email profile openid_client_registration
                    description: A custom scope
        "400":
          description: Missing or invalid parameters.
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "401":
          description: Authentication - Authorization.
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "403":
          description: Forbidden.
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "405":
          description: The HTTP method is not valid
          headers:
            Allow:
              description: This header is required by RFC 2616 and contains a comma separated list of valid HTTP methods.
              schema:
                type: string
                default: GET
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "500":
          description: unknown error
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
      summary: OpenID Connect Dynamic Registration Configuration endpoint
  /oidc/keys:
    options:
      tags:
        - Authorization Server APIs
      operationId: Options_jwk_set_
      description: CORS preflight request
      parameters:
        - name: Access-Control-Request-Headers
          in: header
          required: true
          description: The Access-Control-Request-Headers request header is used when issuing a preflight request to let the server know which HTTP headers will be used when the actual request is made.
          schema:
            type: string
        - name: Access-Control-Request-Method
          in: header
          required: true
          description: The Access-Control-Request-Method request header is used when issuing a preflight request to let the server know which HTTP method will be used when the actual request is made.
          schema:
            type: string
        - name: Origin
          in: header
          required: true
          description: The Origin request header indicates where a fetch originates from.
          schema:
            type: string
      responses:
        "204":
          description: "No Content, applicable to OPTIONS request with preflight configuration"
          headers:
            Access-Control-Allow-Methods:
              description: "Allowable Methods, GET"
              schema:
                type: string
                default: GET
        "400":
          description: Bad request
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
      summary: OpenID Connect jwks endpoint
    get:
      tags:
        - Authorization Server APIs
      operationId: Get_jwk_set_
      description: "This endpoint implements the JWKS_URI as specified at http://openid.net/specs/openid-connect-discovery-1_0.html#ProviderMetadata"
      responses:
        "200":
          description: JWK set containing public keys that enable clients to validate a JSON Web Token (JWT) issued by this OpenID Connect Provider
          content:
            application/json:
              schema:
                type: object
                properties:
                  keys:
                    type: array
                    items:
                      type: string
                    example:
                      - kty: RSA
                        kid: default_ssl_key
                        use: sig
                        "n": 58BezRBeYOM3rOo1vcllcLc8QAwz6AmQj4EvGUqATMUz4bfYJ9Lf2wb9xCQhSLSkndfFAF5V754G0mRelBGK7yIja-M-EBXoJeT3nvwA46g7MkZGf11uP2dz2k4CkLdFHnlGzvuLQVBQpqbz-O_hFfEDxBk9zV4shR8O_iGv4fDi0dNHZfXzxkr_iH8Oj2qQeZFvv61I4RffeNmx04lYea2KFsF_8rWDlENWAr8RbqpY_y5lbxgC_xyBunTkoIEommqz55ZFIcklYerJUVSeIA90KMyM60wZh0JF_T5kuXEs-3AWh8Bkx-sVE2hu5S5x4_lADsPojLwWTT7or_sw9Q
                        e: AQAB
                    description: JWK set in JSON array format
        "403":
          description: Forbidden.
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "405":
          description: The HTTP method is not valid
          headers:
            Allow:
              description: This header is required by RFC 2616 and contains a comma separated list of valid HTTP methods.
              schema:
                type: string
                default: GET
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "500":
          description: unknown error
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
      summary: OpenID Connect jwks endpoint
  /.well-known/openid-configuration:
    options:
      tags:
        - Authorization Server APIs
      operationId: Options_getOpenIDDiscovery
      description: CORS preflight request
      parameters:
        - name: Access-Control-Request-Headers
          in: header
          required: true
          description: The Access-Control-Request-Headers request header is used when issuing a preflight request to let the server know which HTTP headers will be used when the actual request is made.
          schema:
            type: string
        - name: Access-Control-Request-Method
          in: header
          required: true
          description: The Access-Control-Request-Method request header is used when issuing a preflight request to let the server know which HTTP method will be used when the actual request is made.
          schema:
            type: string
        - name: Origin
          in: header
          required: true
          description: The Origin request header indicates where a fetch originates from.
          schema:
            type: string
      responses:
        "204":
          description: "No Content, applicable to OPTIONS request with preflight configuration"
          headers:
            Access-Control-Allow-Methods:
              description: "Allowable Methods, GET"
              schema:
                type: string
                default: GET
        "400":
          description: Bad request
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
      summary: OpenID Connect Discovery endpoint
    get:
      tags:
        - Authorization Server APIs
      operationId: Get_OpenIDDiscovery
      responses:
        "200":
          description: OpenID Discovery Configuration
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OpenIDDiscovery"
        "403":
          description: Forbidden.
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "405":
          description: The HTTP method is not valid
          headers:
            Allow:
              description: This header is required by RFC 2616 and contains a comma separated list of valid HTTP methods.
              schema:
                type: string
                default: GET
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "500":
          description: unknown error
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
      summary: OpenID Connect Discovery endpoint
      description: "This endpoint follows the specification defined at http://openid.net/specs/openid-connect-discovery-1_0.html#ProviderMetadata. It provides a mechanism for an OpenID Connect Relying Party to discover the End-User's OpenID Provider and obtain information needed to interact with it, including its OAuth 2.0 endpoint locations."
  /saml/acs:
    post:
      tags:
        - SAML APIs
      description: This route will handle all SAML response as a callback from IDP
      parameters:
        - name: SAMLResponse
          in: query
          required: true
          description: "This is the 'SAMLResponse' of the requesting AUTHnreq."
          schema:
            type: string
      responses:
        "400":
          description: Missing or invalid parameters.
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "405":
          description: The HTTP method is not valid
          headers:
            Allow:
              description: This header is required by RFC 2616 and contains a comma separated list of valid HTTP methods.
              schema:
                type: string
                default: POST
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "500":
          description: unknown error
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
  /saml/assertion:
    get:
      tags:
        - SAML APIs
      description: This route will serves SAML assertion, useful for clients who need it for their local scope
      parameters:
        - name: access_token
          in: query
          required: true
          description: "This is the 'access_token' of the requesting client."
          schema:
            type: string
      responses:
        "200":
          description: Successful response including details about the request and a valid SAMLResponse.
          content:
            application/json:
              schema:
                type: object
                properties:
                  # TODO
                  request_id:
                    type: string
                    example: 47231c87-74f3-4990-99ad-31e8a801e3b5
                    description: Request ID
                  saml_response:
                    type: string
                    example: "<xml? ....>"
                    described: Requested SAMLResponse
        "400":
          description: Missing or invalid parameters.
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "401":
          description: Authentication - Authorization.
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "403":
          description: Forbidden.
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "405":
          description: The HTTP method is not valid
          headers:
            Allow:
              description: This header is required by RFC 2616 and contains a comma separated list of valid HTTP methods.
              schema:
                type: string
                default: POST
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "500":
          description: unknown error
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
  /saml/metadata:
    get:
      tags:
        - SAML APIs
      description: This route will serves SAML metadata
      responses:
        "200":
          description: SAML metadata
          # content:
          #   application/xml:
          #     schema:
        "405":
          description: The HTTP method is not valid
          headers:
            Allow:
              description: This header is required by RFC 2616 and contains a comma separated list of valid HTTP methods.
              schema:
                type: string
                default: "GET"
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
        "500":
          description: unknown error
          headers:
            Pragma:
              description: Pragma browser directive
              schema:
                type: string
                default: no-cache
            Cache-Control:
              description: Cache-Control browser directive
              schema:
                type: string
                default: no-store
components:
  responses:
    auth302:
      description: "Will contain either: A success response including the redirect location header to the server that handles the authentication.  The redirect parameter 'sessionData's structure looks like the model schema shown OR 'invalid scope' OR 'unsupported response type' OR 'unauthorized client'. The non-successful conditions may include redirect query params as follows: 'error', string with default value:  invalid_request 'error_description', string with description of error 'state', string with no default value.  It is opaque to the server and returned as received. 'x-ca-err', string with default 3000108"
      headers:
        location:
          description: "Location (URL) includes these required parameters: action=(display or login depending on 'prompt' and 'id_token_hint') and sessionID and sessionData (a JWT containing a JSON message holding session data)"
          schema:
            type: string
        Pragma:
          description: Pragma directive
          schema:
            type: string
            default: no-cache
        Cache-Control:
          description: Cache control directive
          schema:
            type: string
            default: no-store
    authToken200:
      description: "A success response that includes the issued token, expire and other details from the OAuth Server"
      headers:
        Pragma:
          description: Pragma browser directive
          schema:
            type: string
            default: no-cache
        Cache-Control:
          description: Cache-Control browser directive
          schema:
            type: string
            default: no-store
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/TokenData"
  securitySchemes:
    openId:
      type: openIdConnect
      openIdConnectUrl: /.well-known/openid-configuration
  schemas:
    TokenData:
      type: object
      properties:
        access_token:
          type: string
          description: The Access Token for the given token request
        token_type:
          type: string
          description: The Token Type issued
          example: Bearer
        expires_in:
          type: string
          description: "The expiry time, in seconds"
          example: "3600"
        refresh_token:
          type: string
          description: "The refresh token, if applicable"
        scope:
          type: string
          description: The issued scope
          example: oob
        id_token:
          type: string
          description: "If the requested SCOPE included 'msso' or 'openid', response includes an id_token"
        id_token_type:
          type: string
          description: "If the requested SCOPE included 'msso' or 'openid', response includes an id_token_type"
      title: TokenData
    OpenIDDiscovery:
      required:
        - authorization_endpoint
        - id_token_signing_alg_values_supported
        - issuer
        - jwks_uri
        - response_types_supported
        - subject_types_supported
        - token_endpoint
      type: object
      properties:
        userinfo_endpoint:
          type: string
          example: "https://example.org/oidc/v1/userinfo"
          description: URL of the user info endpoint
        jwks_uri:
          type: string
          example: "https://example.org/oidc/v1/keys"
          description: URL of JSON Web Key Set document
        scopes_supported:
          items:
            type: string
          type: array
          example:
            - openid
          description: list of the OAuth 2.0 scope values that this server supports
        subject_types_supported:
          items:
            type: string
          type: array
          example:
            - pairwise
          description: list of the Subject Identifier types that this OP supports
        token_endpoint:
          type: string
          example: "https://example.org/oidc/v1/token"
          description: URL of the OAuth 2.0 token endpoint
        id_token_signing_alg_values_supported:
          items:
            type: string
          type: array
          example:
            - RS256
            - HS256
          description: list of the JWS signing algorithms (alg values) supported by the OP for the ID Token to encode the Claims in a JWT
        response_types_supported:
          items:
            type: string
          type: array
          example:
            - code
            - token_id_token
          description: ist of the OAuth 2.0 response_type values that this OP supports
        claims_supported:
          items:
            type: string
          type: array
          example:
            - sub
            - iss
            - auth_time
            - acr
          description: list of the Claim Names of the Claims that the OpenID Provider MAY be able to supply values for
        authorization_endpoint:
          type: string
          example: "https://example.org/oidc/v1/authorize"
          description: URL of the OAuth 2.0 authorization endpoint
        issuer:
          type: string
          example: "https://example.org"
          description: "the identifier of the token's issuer. This is identical to the 'iss' Claim value in ID Tokens"
        grant_types_supported:
          items:
            type: string
          type: array
          example:
            - authorization_code
            - implicit
          description: list of the OAuth 2.0 Grant Type values that this OP supports
        acr_values_supported:
          items:
            type: string
          type: array
          example:
            - "urn:mace:incommon:iap:silver"
          description: list of the Authentication Context Class References that this OP supports
        token_endpoint_auth_methods_supported:
          items:
            type: string
          type: array
          example:
            - client_secret_basic
          description: list of Client Authentication methods supported by this Token Endpoint
        token_endpoint_auth_signing_alg_values_supported:
          items:
            type: string
          type: array
          example:
            - RS256
          description: list of the JWS signing algorithms (alg values) supported by the Token Endpoint for the signature on the JWT used to authenticate the Client at the Token Endpoint for the private_key_jwt and client_secret_jwt authentication methods. Servers SHOULD support RS256. The value none MUST NOT be used.
        display_values_supported:
          items:
            type: string
          type: array
          example:
            - page
            - popup
          description: list of the display parameter values that the OpenID Provider supports
        claim_types_supported:
          items:
            type: string
          type: array
          example:
            - normal
          description: list of the Claim Types that the OpenID Provider supports
        service_documentation:
          type: string
          example: "https://openid.net/specs/openid-connect-core-1_0.html#CodeFlowAuth"
          description: URL of a page containing human-readable information that developers might want or need to know when using the OpenID Provider
        ui_locales_supported:
          items:
            type: string
          type: array
          example:
            - en-US
            - en-GB
          description: Languages and scripts supported for the user interface
      description: "The OpenID configuration document as defined by the specification: http://openid.net/specs/openid-connect-discovery-1_0.html#ProviderMetadata"
